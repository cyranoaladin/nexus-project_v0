# üö® IMPORTANT: Avant d'utiliser cette config, ex√©cuter sur le VPS :
# sudo chmod 755 /home/nexusadmin
# sudo chmod -R 755 /home/nexusadmin/nexus-project
# Voir IMPORTANT_PERMISSIONS_VPS.md pour plus de d√©tails

server {
    server_name nexusreussite.academy www.nexusreussite.academy;

    # R√®gle pour les fichiers statiques du build
    location /_next/static {
        alias /home/nexusadmin/nexus-project/.next/static;
        expires 1y;
        access_log off;
    }

    # R√®gle pour les images et autres fichiers du dossier /public
    location ~ ^/(images/|favicon\.ico|.*\.svg|.*\.png|.*\.jpg|.*\.jpeg|.*\.gif) {
        alias /home/nexusadmin/nexus-project/public$request_uri;
        expires 1y;
        access_log off;
    }

    # Toutes les autres requ√™tes vont √† l'application Next.js
    location / {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # ... (La configuration SSL sera g√©r√©e par Certbot sur le serveur)
    listen 80;
}
