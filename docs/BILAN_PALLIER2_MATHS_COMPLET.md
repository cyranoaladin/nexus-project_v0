# FORMULAIRE BILAN D'ENTRÉE — PALLIER 2 EXCELLENCE MATHS
## Nexus Réussite — Première EDS Mathématiques

---

# (1) FORMULAIRE — Version Texte

## I. IDENTITÉ & CONTEXTE SCOLAIRE

**I.1 Informations personnelles**
- Nom : [Texte court]
- Prénom : [Texte court]
- Date de naissance : [Date]
- Email personnel : [Email]
- Téléphone : [Téléphone]
- Ville de résidence : [Texte court]

**I.2 Contexte scolaire**
- Établissement actuel : [Texte court]
- Classe : [Choix unique] ☐ Première Générale
- Filière : [Choix unique] ☐ Spécialité Maths ☐ Option Maths ☐ Ni l'un ni l'autre
- Nom du professeur de mathématiques : [Texte court]
- Effectif de la classe de mathématiques : [Nombre]

**I.3 Performances scolaires**
- Moyenne générale du trimestre en cours (toutes matières) : [Nombre décimal]
- Moyenne de Spécialité Maths (dernier trimestre) : [Nombre décimal]
- Moyenne de Maths (si Option) : [Nombre décimal]
- Résultat du dernier Bac blanc Maths : [Texte court, ex: "14/20"]
- Classement dans la classe de Maths (si connu) : [Texte court]
- Rang sur Effectif total : [Nombre]

**I.4 Chapitres vus cette année**
- Veuillez copier-coller ici la liste exacte des chapitres vus en classe cette année (depuis la rentrée de septembre) :
  [Zone de texte long - AIDE : Ouvrez votre cahier, votre manuel, ou l'ENT et copiez les titres exacts des chapitres. Exemple : "1. Second degré - forme canonique", "2. Suites arithmétiques et géométriques", etc.]

**I.5 Chapitres NON encore vus (prévision)**
- Parmi les thèmes suivants, lesquels ne sont PAS encore traités en classe ? [Choix multiples]
  ☐ Équations différentielles
  ☐ Fonctions logarithmes
  ☐ Intégration / primitives
  ☐ Sommes et récurrence
  ☐ Produit scalaire dans l'espace
  ☐ Probabilités conditionnelles
  ☐ Variable aléatoire / loi binomiale
  ☐ Algorithmique (listes, fonctions)

---

## II. AUTO-DIAGNOSTIC PAR DOMAINES

*Pour chaque compétence, évaluez votre niveau réel (pas ce que vous espérez) et cochez "Non abordé" si le chapitre n'a pas encore été traité en classe.*

### II.1 ALGÈBRE & SUITES

| Compétence | Non encore vu | Niveau 0 (Aucun) | Niveau 1 (Fragile) | Niveau 2 (Correct) | Niveau 3 (Solide) | Niveau 4 (Excellent) |
|------------|----------------|------------------|--------------------|--------------------|--------------------|----------------------|
| Suites arithmétiques (terme général, somme) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Suites géométriques (terme général, somme) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Passage récurrence → explicite | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Démonstration par récurrence | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Sens de variation d'une suite | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Suite convergeante / divergente | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Modélisation (évolution exponentielle) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Équations du second degré (calculs) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Forme canonique | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Factorisation (identités remarquables) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |

**II.1.1 Question ouverte — Algèbre**
Décrivez en 2-3 phrases les chapitres d'algèbre que vous avez "vraiment compris" versus ceux qui vous semblent "mécaniques" ou flous :
[Zone de texte long]

---

### II.2 ANALYSE & DÉRIVATION

| Compétence | Non encore vu | Niveau 0 | Niveau 1 | Niveau 2 | Niveau 3 | Niveau 4 |
|------------|---------------|----------|----------|----------|----------|----------|
| Nombre dérivé (définition, calcul) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Interprétation graphique (tangente) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Calcul de fonction dérivée | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Dérivée de u^n, exp(u), 1/u | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Tableau de variations complet | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Extremum local / problème d'optimisation | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Fonction exponentielle (propriétés, équations) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Fonction logarithme (népérien) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Cercle trigonométrique / radian | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Équations trigonométriques simples | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |

**II.2.1 Question ciblée — Dérivée d'un produit**
Savez-vous démontrer la formule de dérivation d'un produit (u×v)' = u'v + uv' ?
[Choix unique] ☐ Oui, parfaitement ☐ Partiellement ☐ Non ☐ Pas encore vu en cours

**II.2.2 Question ouverte — Analyse**
Quel est pour vous le chapitre le plus difficile en Analyse ? Pourquoi ?
[Zone de texte long]

---

### II.3 GÉOMÉTRIE & PRODUIT SCALAIRE

| Compétence | Non encore vu | Niveau 0 | Niveau 1 | Niveau 2 | Niveau 3 | Niveau 4 |
|------------|---------------|----------|----------|----------|----------|----------|
| Produit scalaire (définition, calculs) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Formule d'Al-Kashi | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Formule de la médiane | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Orthogonalité dans le plan | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Équation cartésienne de droite | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Vecteur normal à une droite | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Équation de cercle | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Projeté orthogonal | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Distance point-droite | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Géométrie dans l'espace (3D) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |

**II.3.1 Question ciblée — Problème complexe**
Avez-vous déjà résolu un problème mobilisant simultanément : produit scalaire + équation cartésienne + optimisation ?
[Choix unique] ☐ Oui, seul ☐ Oui, avec aide ☐ Non, jamais ☐ Pas encore vu

---

### II.4 PROBABILITÉS & VARIABLES ALÉATOIRES

| Compétence | Non encore vu | Niveau 0 | Niveau 1 | Niveau 2 | Niveau 3 | Niveau 4 |
|------------|---------------|----------|----------|----------|----------|----------|
| Probabilités conditionnelles P_A(B) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Formule des probabilités totales | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Indépendance de deux événements | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Arbre pondéré | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Variable aléatoire (espérance) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Variance et écart-type | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Loi binomiale | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Espérance de la loi binomiale | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Modélisation d'une situation aléatoire | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Coefficient binomial (combinaisons) | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |

**II.4.1 Question ouverte — Distinguer P_A(B) de P_B(A)**
En 2-3 phrases, expliquez la différence entre P_A(B) et P_B(A). Donnez un exemple concret :
[Zone de texte long]

---

### II.5 ALGORITHMIQUE & PYTHON

| Compétence | Non encore vu | Niveau 0 | Niveau 1 | Niveau 2 | Niveau 3 | Niveau 4 |
|------------|---------------|----------|----------|----------|----------|----------|
| Écriture d'une fonction Python simple | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Boucle for / while | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Manipulation de listes | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Algorithmique des suites | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Simulation Monte-Carlo | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |
| Calcul de moyenne/écart-type sur un échantillon | ☐ | ☐ | ☐ | ☐ | ☐ | ☐ |

**II.5.1 Environnement**
Avez-vous un environnement Python fonctionnel sur votre ordinateur ?
[Choix unique] ☐ Oui ☐ Non, mais je sais utiliser ☐ Non, je n'ai jamais codé

**II.5.2 Code**
Si vous avez déjà codé en Python, collez ici un exemple de code que vous avez écrit (哪怕 une seule ligne) :
[Zone de texte long - Optionnel]

---

## III. PREUVES & DOCUMENTS (UPLOAD)

*Optional mais fortement recommandé pour affiner le diagnostic*

**III.1 Photo de votre dernier devoir surveillé corrigé**
[Upload fichier - JPG, PNG, PDF - MAX 10MB]
*AIDE : Photographiez ou scannez votre dernier DS de maths avec la correction du professeur. Cela nous permet d'analyser votre rédaction, vos erreurs fréquentes, et votre niveau de détail.*

**III.2 Photo d'un exercice qui vous a bloqué**
[Upload fichier - JPG, PNG, PDF - MAX 5MB]
*Décrivez brièvement pourquoi cet exercice vous a posé problème :*

**III.3 Votre fiche de résumé personnelle (optionnel)**
[Upload fichier - PDF - MAX 2MB]
*Si vous avez l'habitude de faire des fiches de cours, vous pouvez en joindre une. Cela nous aide à comprendre votre méthode de travail.*

---

## IV. ÉPREUVE ANTICIPÉE MATHS 2026

*Rappel : Écrit 2h sans calculatrice — 6 pts automatismes + 14 pts exercices structurés — Coefficient 2*

**IV.1 Automatismes (calcul mental, sans machine)**
Évaluez votre niveau sur les calculs suivants (temps imparti : 30 secondes par calcul) :

| Type de calcul | Non maîtrisé | Fragile | Correct | Solide | Très rapide |
|-----------------|--------------|---------|---------|--------|--------------|
| Calcul mental (additions, multiplications) | ☐ | ☐ | ☐ | ☐ | ☐ |
| Calcul algébrique (développer, factoriser) | ☐ | ☐ | ☐ | ☐ | ☐ |
| Résolution d'équations simples | ☐ | ☐ | ☐ | ☐ | ☐ |
| Calcul de dérivées simples | ☐ | ☐ | ☐ | ☐ | ☐ |
| Calcul de probabilités simples | ☐ | ☐ | ☐ | ☐ | ☐ |

**IV.2 Exercices structurés**
Évaluez votre capacité à rédiger des exercices complets :

| Compétence | Niveau 0 | Niveau 1 | Niveau 2 | Niveau 3 | Niveau 4 |
|------------|----------|----------|----------|----------|----------|
| Structure de démonstration | ☐ | ☐ | ☐ | ☐ | ☐ |
| Rédaction d'une preuve | ☐ | ☐ | ☐ | ☐ | ☐ |
| Gestion du temps (2h) | ☐ | ☐ | ☐ | ☐ | ☐ |
| Gestion du stress en examen | ☐ | ☐ | ☐ | ☐ | ☐ |

**IV.3 Sujets zéro**
Avez-vous travaillé sur les sujets zéro de l'épreuve anticipée 2026 ?
[Choix unique] ☐ Oui, plusieurs ☐ Oui, un ☐ Non, pas encore ☐ Je ne sais pas ce que c'est

**IV.4 Risque principal — É preuve anticipée**
Quel est, selon vous, le principal risque pour cette épreuve ?
[Zone de texte long - AIDE : Exemples : "Je ne suis pas assez rapide", "Je panic sur les démonstrations", "Je ne sais pas gérer l'absence de calculatrice", etc.]

---

## V. PROFIL MÉTHODOLOGIQUE & COGNITIF

**V.1 Style d'apprentissage**
Je comprends mieux les mathématiques :
[Choix unique]
☐ En comprenant la démonstration théorique
☐ En faisant de nombreux exercices
☐ En visualisant sur un graphique
☐ En ayant des exemples concrets
☐ En cherchant par moi-même
☐ En ayant des explications orales

**V.2 Face à un problème difficile**
Quand je tombe sur un exercice que je ne sais pas faire :
[Choix unique]
☐ Je persévère jusqu'à trouver
☐ Je cherche une méthode dans mon cours
☐ Je cherche un exemple similaire
☐ Je demande de l'aide immédiatement
☐ Je laisse tomber et passe à autre chose
☐ Je relis l'énoncé plusieurs fois

**V.3 Temps de travail**
- Temps moyen pour résoudre un exercice type Bac (difficulty moyenne) : [Texte court, ex: "15-20 min"]
- Temps de travail personnel hebdomadaire en maths (hors cours) : [Texte court, ex: "3h"]
- Durée maximale de concentration continue sur les maths : [Choix unique] ☐ 30 min ☐ 1h ☐ 1h30 ☐ 2h ☐ 3h+

**V.4 Erreurs fréquentes**
Cochez les types d'erreurs que vous faites le plus souvent :
[Choix multiples]
☐ Erreurs de calcul (faute de frappe, opération)
☐ Erreurs de signe
☐ Erreurs d'application du cours
☐ Erreurs de raisonnement (faux pas logique)
☐ Erreurs de rédaction (je sais faire mais mal rédiger)
☐ Erreurs de temps (trop lent)
☐ Erreurs de distraction (je sais mais je me trompe)
☐ Je ne fais pas d'erreurs de ce type

**V.5 Capacité d'attention (3h d'affilée)**
Sur une échelle de 0 à 4 :
[Échelle 0-4]

---

## VI. AMBITION & PROJET D'ORIENTATION

**VI.1 Objectif de mention au Bac**
[Choix unique]
☐ Mention Bien (12-13.99)
☐ Mention Très Bien (14-15.99)
☐ Mention Félicitations (16+)
☐ Sans objectif de mention / Je ne sais pas

**VI.2 Projet post-Bac**
[Choix unique]
☐ Prépa MPSI (Maths-Physique)
☐ Prépa MP2I (Maths-Info)
☐ Prépa PCSI (Physique-Chimie)
☐ Prépa PSI
☐ Université (Maths, Info, Physique)
☐ École d'ingénieurs post-Bac
☐ Autre (précisez) : _______________
☐ Je ne sais pas encore

**VI.3 Formation d'élite**
Souhaitez-vous intégrer une formation sélective (prépa, école d'ingé, parcoursup) ?
[Zone de texte long - Précisez laquelle et pourquoi]

**VI.4 Engagement**
Êtes-vous prêt(e) à suivre un rythme exigeant (Pallier 2 = 2h de maths par jour pendant le stage + travail personnel) ?
[Choix unique] ☐ Oui, totalement ☐ Oui, mais je doute de ma régularité ☐ Non, je préfère un rythme modéré ☐ À discuter

---

## VII. PIÈCES COMPLÉMENTAIRES (UPLOAD)

**VII.1 Liste des chapitres vus cette année (sommaire du manuel)**
[Upload fichier - PDF - Optionnel]
*Si votre établissement utilise un manuel avec sommaire détaillé, vous pouvez photographier/scanner le sommaire pour que nous puissions vérifier l'alignement.*

**VII.2 Tout autre document pertinent**
[Upload fichier - Optionnel]
*Rapport de compétences, fiche Parcoursup, etc.*

---

## VIII. ZONE LIBRE

**VIII.1 Objectifs d'amélioration**
Quel est le point précis que vous voulez ABSOLUMENT améliorer pendant ce stage ?
[Zone de texte long -Soyez le plus précis possible. Exemple : "Je veux savoir démontrer par récurrence dans tous les cas" ou "Je veux maîtriser les problèmes d'optimisation"]

**VIII.2 Difficultés invisibles**
Quelles sont les difficultés que vous rencontrez mais que vous n'osez pas toujours exprimer ? (blocus, honte de demander, perte de confiance, etc.)
[Zone de texte long - CONFIDENTIEL : Cette réponse n'est visible que par l'équipe pédagogique]

**VIII.3 Message libre**
Y a-t-il autre chose que vous souhaitez nous dire ?
[Zone de texte long - Optionnel]

---

# (2) MATRICE DE COMPÉTENCES

## Structure

| Domaine | Sous-compétence | Indicateurs observables (ce que l'élève peut faire) | Type d'erreur fréquent |
|---------|-----------------|----------------------------------------------------|-----------------------|
| **ALGÈBRE** | Suites arithmétiques | Calcule le terme de rang n, calcule une somme S = n(u₀+u_n)/2 | Confusion u_n vs n |
| | Suites géométriques | Calcule le terme de rang n, calcule une somme géométrique | Oubli de la raison |
| | Récurrence | Mécanique d'initialisation + hérédité | Erreur d'initialisation |
| | Second degré | Résout ax²+bx+c=0, utilise forme canonique | Erreur de discriminant |
| | Factorisation | Factorise avec facteur commun, identités | Erreur de signe |
| **ANALYSE** | Dérivation | Dérive polynôme, exponentielle, fraction | Erreur de formule |
| | Variations | Dresser tableau variations complet | Confusion extremum/dérivée |
| | Optimisation | Résout problème de max/min | Mauvaise mise en équation |
| | Exponentielle | Résout équations e^a = b, e^a ≤ e^b | Erreur sur ln |
| | Logarithme | Dérive ln(u), résout ln(u)=v | Erreur sur domaine |
| **GÉOMÉTRIE** | Produit scalaire | Calcule u·v avec formules | Erreur de formule |
| | Équations droites | Trouve équation avec point+vecteur normal | Confusion vecteur directeur/normal |
| | Cercle | Équation (x-a)²+(y-b)²=R² | Erreur de rayon |
| | Al-Kashi | Calcule côté avec 2 côtés + angle | Mauvais côté pour l'angle |
| **PROBABILITÉS** | Conditionnelles | Calcule P(A∩B) = P(A)×P_A(B) | Confusion P_A(B) vs P_B(A) |
| | Arbre | Construire et lire arbre pondéré | Erreur de multiplication |
| | Binomiale | Calcule P(X=k) avec coefficient binomial | Erreur de combinaison |
| | Espérance | Calcule E(X) = Σ x_i p_i | Confusion avec variance |
| **ALGO** | Boucles | Écrit for i in range(n): | Boucle infinie |
| | Listes | Crée, modifie, parcourt liste | Index out of range |
| | Fonctions | Définit def ma_fonction(x): | Return manquant |

## Échelles normalisées

### Maîtrise (M)
| Code | Signification |
|------|---------------|
| NA | Non Abordé / Pas encore vu |
| 0 | Aucun acquis - Cannot faire seul |
| 1 | Fragile - Peut faire avec aide |
| 2 | Correct - Peut faire seul normalement |
| 3 | Solide - Maîtrise bien, quelques erreurs |
| 4 | Excellent - Parfait, rapide, rigoureux |

### Confiance (C)
| Code | Signification |
|------|---------------|
| 0 | Pas confiance du tout |
| 1 | Confiance faible |
| 2 | Confiance moyenne |
| 3 | Confiance totale |

### Friction/Effort (F)
| Code | Signification |
|------|---------------|
| 0 | Effort nul (trop facile) |
| 1 | Effort faible |
| 2 | Effort modéré |
| 3 | Effort élevé (très difficile) |

---

# (3) JSON SCHEMA — student_intake_v1

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://nexusreussite.tn/schemas/student-intake-v1.json",
  "title": "Student Intake - Pallier 2 Excellence Maths",
  "type": "object",
  "required": [
    "identity",
    "schoolContext",
    "performance",
    "competencies",
    "examPrep",
    "methodology",
    "ambition"
  ],
  "properties": {
    "version": {
      "type": "string",
      "const": "v1",
      "description": "Version du schema"
    },
    "submittedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Date de soumission"
    },
    "identity": {
      "type": "object",
      "required": ["firstName", "lastName", "email", "phone"],
      "properties": {
        "firstName": { "type": "string", "minLength": 1 },
        "lastName": { "type": "string", "minLength": 1 },
        "birthDate": { "type": "string", "format": "date" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "city": { "type": "string" }
      }
    },
    "schoolContext": {
      "type": "object",
      "required": ["establishment", "grade"],
      "properties": {
        "establishment": { "type": "string" },
        "grade": { "type": "string", "enum": ["Première Générale"] },
        "stream": { 
          "type": "string", 
          "enum": ["Spécialité Maths", "Option Maths", "Ni l'un ni l'autre", "NA"] 
        },
        "mathTeacher": { "type": "string" },
        "classSize": { "type": "integer" }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "generalAverage": { "type": "number" },
        "mathSpecialtyAverage": { "type": "number" },
        "mathOptionAverage": { "type": "number" },
        "bacBlancResult": { "type": "string" },
        "classRanking": { "type": "string" },
        "totalStudents": { "type": "integer" }
      }
    },
    "chapters": {
      "type": "object",
      "properties": {
        "chaptersStudied": { "type": "string", "description": "Liste des chapitres vus (texte libre)" },
        "chaptersNotYetStudied": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Liste des chapitres non encore vus"
        },
        "chapterDetails": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "title": { "type": "string" },
              "status": { "type": "string", "enum": ["completed", "in_progress", "not_started"] },
              "teacherNote": { "type": "string" }
            }
          }
        }
      }
    },
    "competencies": {
      "type": "object",
      "properties": {
        "algebra": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["skill", "mastery", "confidence", "friction"],
            "properties": {
              "skill": { "type": "string" },
              "mastery": { "type": "integer", "minimum": 0, "maximum": 4 },
              "notStudied": { "type": "boolean", "default": false },
              "confidence": { "type": "integer", "minimum": 0, "maximum": 3 },
              "friction": { "type": "integer", "minimum": 0, "maximum": 3 },
              "errorTypes": {
                "type": "array",
                "items": { "type": "string", "enum": ["calcul", "signe", "methode", "raisonnement", "redaction", "temps"] }
              },
              "comment": { "type": "string" }
            }
          }
        },
        "analysis": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["skill", "mastery"],
            "properties": {
              "skill": { "type": "string" },
              "mastery": { "type": "integer", "minimum": 0, "maximum": 4 },
              "notStudied": { "type": "boolean", "default": false },
              "confidence": { "type": "integer", "minimum": 0, "maximum": 3 },
              "friction": { "type": "integer", "minimum": 0, "maximum": 3 },
              "errorTypes": { "type": "array", "items": { "type": "string" } },
              "comment": { "type": "string" }
            }
          }
        },
        "geometry": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["skill", "mastery"],
            "properties": {
              "skill": { "type": "string" },
              "mastery": { "type": "integer", "minimum": 0, "maximum": 4 },
              "notStudied": { "type": "boolean", "default": false },
              "confidence": { "type": "integer", "minimum": 0, "maximum": 3 },
              "friction": { "type": "integer", "minimum": 0, "maximum": 3 },
              "errorTypes": { "type": "array", "items": { "type": "string" } },
              "comment": { "type": "string" }
            }
          }
        },
        "probabilities": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["skill", "mastery"],
            "properties": {
              "skill": { "type": "string" },
              "mastery": { "type": "integer", "minimum": 0, "maximum": 4 },
              "notStudied": { "type": "boolean", "default": false },
              "confidence": { "type": "integer", "minimum": 0, "maximum": 3 },
              "friction": { "type": "integer", "minimum": 0, "maximum": 3 },
              "errorTypes": { "type": "array", "items": { "type": "string" } },
              "comment": { "type": "string" }
            }
          }
        },
        "algorithms": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["skill", "mastery"],
            "properties": {
              "skill": { "type": "string" },
              "mastery": { "type": "integer", "minimum": 0, "maximum": 4 },
              "notStudied": { "type": "boolean", "default": false },
              "confidence": { "type": "integer", "minimum": 0, "maximum": 3 },
              "friction": { "type": "integer", "minimum": 0, "maximum": 3 },
              "hasPython": { "type": "boolean" },
              "codeExample": { "type": "string" }
            }
          }
        }
      }
    },
    "examPrep": {
      "type": "object",
      "properties": {
        "automatisms": {
          "type": "object",
          "properties": {
            "mentalMath": { "type": "integer", "minimum": 0, "maximum": 4 },
            "algebraicCalculus": { "type": "integer", "minimum": 0, "maximum": 4 },
            "simpleEquations": { "type": "integer", "minimum": 0, "maximum": 4 },
            "simpleDerivatives": { "type": "integer", "minimum": 0, "maximum": 4 },
            "simpleProbabilities": { "type": "integer", "minimum": 0, "maximum": 4 }
          }
        },
        "structuredExercises": {
          "type": "object",
          "properties": {
            "proofStructure": { "type": "integer", "minimum": 0, "maximum": 4 },
            "proofWriting": { "type": "integer", "minimum": 0, "maximum": 4 },
            "timeManagement": { "type": "integer", "minimum": 0, "maximum": 4 },
            "stressManagement": { "type": "integer", "minimum": 0, "maximum": 4 }
          }
        },
        "hasWorkedOnZeroSubjects": { "type": "boolean" },
        "mainRisk": { "type": "string" },
        "canDemonstrateProductRule": {
          "type": "string",
          "enum": ["yes", "partial", "no", "notStudied"]
        }
      }
    },
    "methodology": {
      "type": "object",
      "properties": {
        "learningStyle": { 
          "type": "string",
          "enum": ["theoretical", "practice", "visual", "concrete", "exploratory", "oral", "NA"] 
        },
        "problemSolving": {
          "type": "string",
          "enum": ["persevere", "method", "example", "askHelp", "giveUp", "reread"] 
        },
        "avgTimePerExercise": { "type": "string" },
        "weeklyWorkHours": { "type": "string" },
        "maxConcentration": { 
          "type": "string", 
          "enum": ["30min", "1h", "1h30", "2h", "3h+"] 
        },
        "attentionScore": { "type": "integer", "minimum": 0, "maximum": 4 },
        "errorTypes": {
          "type": "array",
          "items": { "type": "string", "enum": ["calcul", "signe", "cours", "raisonnement", "redaction", "temps", "distraction", "none"] }
        }
      }
    },
    "ambition": {
      "type": "object",
      "properties": {
        "targetMention": { 
          "type": "string",
          "enum": ["bien", "tres_bien", "felicitations", "unknown"] 
        },
        "postBacProject": { "type": "string" },
        "eliteTrainingInterest": { "type": "string" },
        "acceptsDemandingPace": {
          "type": "string",
          "enum": ["yesTotally", "yesButDoubt", "no", "toDiscuss"]
        }
      }
    },
    "uploads": {
      "type": "object",
      "properties": {
        "dsPhotos": {
          "type": "array",
          "items": { "type": "string", "format": "uri" }
        },
        "blockingExercise": { "type": "string" },
        "chapterList": { "type": "string", "format": "uri" },
        "otherDocuments": { "type": "array", "items": { "type": "string" } }
      }
    },
    "freeText": {
      "type": "object",
      "properties": {
        "improvementGoals": { "type": "string" },
        "invisibleDifficulties": { "type": "string" },
        "freeMessage": { "type": "string" }
      }
    },
    "scoring": {
      "type": "object",
      "properties": {
        "readinessScore": { "type": "number", "minimum": 0, "maximum": 100 },
        "riskIndex": { "type": "number", "minimum": 0, "maximum": 100 },
        "recommendation": {
          "type": "string",
          "enum": ["Pallier2_confirmed", "Pallier2_conditional", "Pallier1_recommended"]
        }
      }
    }
  }
}
```

---

# (4) RÈGLES DE SCORING

## 4.1 ReadinessScore (Readiness pour Pallier 2)

### Formule
```
ReadinessScore = (Σ Compétences_notNA (M × 6.25)) / Nombre_compétences_notNA
```
*Note : Chaque compétence NOT STUDIED (NA) est EXCLUE du calcul*

### Détail du calcul par domaine

| Domaine | Pondération | Compétences | Max points |
|---------|------------|-------------|------------|
| Algèbre | 30% | 10 | 40 |
| Analyse | 30% | 10 | 40 |
| Géométrie | 15% | 10 | 40 |
| Probabilités | 15% | 10 | 40 |
| Algo | 10% | 6 | 24 |

### Interprétation

| Score | Niveau | Action |
|-------|--------|--------|
| 0-25 | Insuffisant | Pallier 1 recommandé |
| 26-50 | Fragile | Pallier 2 sous condition |
| 51-75 | Correct | Pallier 2 confirmé |
| 76-100 | Solide | Pallier 2 Excellence |

---

## 4.2 RiskIndex (Risque É preuve anticipée 2026)

### Formule
```
RiskIndex = (Facteur_automatismes × 30%) + (Facteur_temps × 20%) + (Facteur_stress × 20%) + (Facteur_démonstration × 30%)
```

### Détail

| Facteur | Calcul | Score 0 | Score 1 | Score 2 | Score 3 | Score 4 |
|---------|--------|---------|---------|---------|---------|---------|
| Automatismes | Moyenne des 5 items | 4+ | 3 | 2 | 1 | 0 |
| Temps | (4 - timeManagement) × 25 | 100% | 75% | 50% | 25% | 0% |
| Stress | (4 - stressManagement) × 25 | 100% | 75% | 50% | 25% | 0% |
| Démonstration | (4 - proofWriting) × 25 | 100% | 75% | 50% | 25% | 0% |

### Interprétation

| RiskIndex | Niveau de risque |
|-----------|-----------------|
| 0-25 | Risque très faible |
| 26-50 | Risque modéré |
| 51-75 | Risque élevé |
| 76-100 | Risque critique |

---

## 4.3 Règles de décision (Recommandation)

### Algorithme

```
SI ReadinessScore >= 55 ET RiskIndex < 60 ALORS
    Recommandation = "Pallier2_confirmed"
SINON SI ReadinessScore >= 40 OU RiskIndex < 75 ALORS
    Recommandation = "Pallier2_conditional"
SINON
    Recommandation = "Pallier1_recommended"
```

### Détail des recommandations

| Recommandation | Message |
|---------------|---------|
| **Pallier2_confirmed** | "Vous êtes prêt pour le Pallier 2 Excellence. Votre niveau et votre rigueur vous permettent d'aborder les défis avancés. Nous vous proposerons un programme d'approfondissement." |
| **Pallier2_conditional** | "Vous avez le potentiel pour le Pallier 2, mais des fragilités ont été identifiées. Un travail préparatoire de 2 semaines est recommandé avant le stage. Nous vous fournirons un programme de mise à niveau." |
| **Pallier1_recommended** | "Nous vous recommandons de commencer par le Pallier 1 pour consolider vos bases. Cela vous permettra d'aborder le Pallier 2 dans de meilleures conditions lors d'un prochain stage." |

---

## 4.4 Gestion des valeurs NA

### Règles

1. **Exclusion pure** : Les compétences NA sont EXCLUES du calcul du ReadinessScore
2. **Pénalité légère** : Si >50% des compétences sont NA, appliquer une pénalité de -5 points au ReadinessScore (car cela limite l'évaluation)
3. **Documentmanquants** : Si aucun DS uploadé, appliquer un malus de -3 points (car on ne peut pas vérifier)
4. **Champ vide** : Si un champ obligatoire est vide, le score est calculé avec les données disponibles et un flag "incomplete" est ajouté

### Exceptions

- Si tous les chapitres d'un domaine sont NA → Le domaine est ignoré dans le calcul global
- Si tous les domaines sont NA → Score = null, recommandation = "Évaluation impossible"

---

# (5) PROMPT LLM POUR GÉNÉRER LE BILAN

```
# ROLE
Tu es "Nexus Réussite — Pôle Pédagogie & Ingénierie IA", expert en didactique des mathématiques au lycée français, en évaluation diagnostique, et en conception de parcours personnalisés.

# CONTEXTE
Tu analyses les réponses d'un élève de Première Générale, Spécialité Mathématiques, inscrit au stage :
**PALLIER 2 — EXCELLENCE — MATHS : OBJECTIF AVANCÉ**

Tu dois générer un bilan stratégique complet et un plan d'action personnalisé.

# ENTRÉES

## Données de l'élève (JSON)
[INSÉRER LE JSON COMPLET ICI]

## Documents RAG disponibles
- Programme officiel EDS Maths Première
- Sujets zéro épreuve anticipée 2026
- Fiches de méthodologie Nexus
- Exercices d'approfondissement par compétence

## Contraintes
- L'élève est en MILIEU D'ANNÉE : certains chapitres peuvent ne pas être vus
- L'objectif est l'EXCELLENCE : viser 16+/20 au Bac et/ou préparer Terminale
- L'épreuve anticipée 2026 est SANS CALCULATRICE : stress accru sur les automatismes

# TÂCHE

Génère un document STRUCTURÉ contenant EXACTEMENT les sections suivantes :

---

## A) DIAGNOSTIQUE SYNTHÉTIQUE (1 page max)

### Profil global
- ReadinessScore : [X]/100
- RiskIndex : [X]/100
- Recommandation : [texte]

### Niveau par domaine
| Domaine | Score | Interprétation |
|---------|-------|----------------|
| Algèbre | X/10 | ... |
| Analyse | X/10 | ... |
| Géométrie | X/10 | ... |
| Probabilités | X/10 | ... |
| Algorithmique | X/10 | ... |

---

## B) 3 FORCES + 3 FRAGILITÉS

### Forces (identifiées par analyse des scores les plus élevés + confiance élevée)
Pour chaque force :
- Compétence exacte
- Preuve (score, commentaire élève)
- Pourquoi c'est une force pour le Pallier 2

### Fragilités (identifiées par : score bas OU confiance basse OU friction élevée)
Pour chaque fragilité :
- Compétence exacte
- Type d'erreur fréquent
- Impact sur l'épreuve anticipée
- Danger pour Terminale

---

## C) PLAN D'ACTION (3 phases)

### Phase 1 : AVANT LE STAGE (2 semaines)
[Liste des actions prioritaires avec deadline]
- Travail sur [compétence X] : ressources assignées
- Entraînement automatismes : 15 min/jour
- ...

### Phase 2 : PENDANT LE STAGE
[Objectifs par session/block]

### Phase 3 : APRÈS LE STAGE (2 semaines)
[Programme de maintien et perfectionnement]

---

## D) PROGRAMME PERSONNALISÉ PAR BLOCS

Pour chaque bloc identifié comme prioritaire :
- Titre du bloc
- Score actuel
- Objectif cible
- Ressources recommandées (fiches, vidéos, exercices)
- Indicateur de réussite

---

## E) ROUTINE D'AUTOMATISMES (sans calculatrice)

### Programme quotidien (15-20 min)
- [Liste d'exercices types avec timing]
- Suivi : [tableau de bord]

### Objectif
- Réduire le temps de calcul mental de 30%
- Atteindre 80% de réussite sur les automatismes en 2 semaines

---

## F) RESSOURCES CLASSÉES

### Fiches (par ordre de priorité)
1. [Titre] - Pourquoi cette fiche
2. ...

### Vidéos
1. [Titre/Chaîne] - Pourquoi cette vidéo
2. ...

### Exercices
1. [Source/Niveau] - Compétence visée
2. ...

---

## G) RECOMMANDATIONS ORIENTATION (si pertinent)

Si l'élève vise une formation d'élite (prépa MPSI, MP2I, école d'ingé) :
- Compétences mathématiques déjà acquises utiles
- Compétences à consolider pour cette voie
- Conseils spécifiques pour la transition Première → Terminale en vue de cette voie
- Ressources avancées recommandées

---

## H) CHECKLIST FINALE

- [ ] Compétences à travailler en priorité : [liste]
- [ ] Ressources à acquérir : [liste]
- [ ] Routine à mettre en place : [détail]
- [ ] Prochaine évaluation prévue : [date]
- [ ] Contact pédagogique assigned : [nom]

---

# EXIGENCES DE STYLE

1. **Premium et professionnel** : Ton doit être celui d'un pedagogue expert, pas d'un camarade de classe
2. **Précis** : Citer les scores, les compétences exactes, les ressources par leur titre
3. **Non-school** : Éviter le ton "devoir fait", utiliser "recommandé", "suggéré", "priorité"
4. **Orienté action** : Chaque paragraphe doit permettre une décision ou une action
5. **Inclusif des NA** : Si un chapitre est NA, l'indiquer explicitement et ne pas le pénaliser

# GARDES-FOUS

1. Si ReadinessScore est null → Dire "Évaluation impossible, données insuffisantes"
2. Si plus de 50% des compétences sont NA → Signaler "Profil atypique, nombreux chapitres non encore vus"
3. Citer les sources RAG utilisées (ex: "D'après le programme officiel EDS...")
4. Ne pas inventer de compétences non présentes dans les données
5. Si contradiction entre scores et commentaires → Prioriser les commentaires

# SORTIE
Génère le bilan COMPLET en Markdown, prêt à être envoyé à l'élève.
```

---

# (6) CHECKLIST D'INTÉGRATION RAG

## 6.1 Champs à indexer (pour la recherche vectorielle)

### Primary Fields (obligatoires pour l'indexation)
| Champ | Type | Index | Reason |
|-------|------|-------|--------|
| studentId | UUID | ✅ | Clé primaire |
| submittedAt | DateTime | ✅ | Tri temporel |
| readinessScore | Float | ✅ | Filtrage par niveau |
| riskIndex | Float | ✅ | Filtrage par risque |
| recommendation | Enum | ✅ | Catégorisation |
| domains.scores | Object | ✅ | Recherche par domaine |
| competence.skills | Array | ✅ | Recherche par compétence |
| ambition.postBacProject | String | ✅ | Orientation |

### Secondary Fields (pour enrichissement)
| Champ | Type | Index | Reason |
|-------|------|-------|--------|
| chapters.chaptersStudied | String | ❌ | Full-text search |
| freeText.invisibleDifficulties | String | ❌ | Analyse sentiment |
| uploads.dsPhotos | URI | ❌ | Stockage objet |

---

## 6.2 Métadonnées

```json
{
  "indexedAt": "2024-01-15T10:30:00Z",
  "schemaVersion": "v1",
  "source": "student-intake-form",
  "processingStatus": "completed",
  "ragTags": ["pallier2", "maths", "premiere", "excellence"],
  "privacyLevel": "confidential",
  "retentionDays": 365
}
```

---

## 6.3 Stratégie de Chunking

### Pour les bilans générés
- **Chunk principal** : Par section (A, B, C...)
- **Taille optimale** : 500-1000 tokens par chunk
- **Overlap** : 10% pour maintenir le contexte
- **Métadonnées du chunk** : Section, score associé, compétences concernées

### Pour les documents RAG
- **Fiches de cours** : Par chapitre
- **Exercices** : Par compétence + niveau
- **Sujets zéro** : Par année + type d'exercice

---

## 6.4 Exemples de Requêtes

### Requête 1 : Recherche d'élève pour Pallier 2
```
"readinessScore > 50 AND riskIndex < 60 AND recommendation = 'Pallier2_confirmed'"
```

### Requête 2 : Élèves fragiles en probabilités
```
"domains.probabilities.score < 2 AND submittedAt > '2024-01-01'"
```

### Requête 3 : Élèves visant prépa MPSI
```
"ambition.postBacProject CONTAINS 'MPSI'"
```

### Requête 4 : Recherche par compétence
```
"competence.skill = 'récurrence' AND competence.mastery < 2"
```

---

## 6.5 Garde-fous

### Anti-hallucination
1. **Vérification des scores** : Always recalculer les scores à partir des données brutes, ne pas faire confiance aux valeurs pré-calculées
2. **Citer les sources** : Chaque affirmation doit être tracée vers une donnée source
3. **Seuil de confiance** : Si moins de 50% des compétences évaluées → Afficher "Données insuffisantes pour un diagnostic fiable"

### Gestion des NA
1. **Explicitement signaler** : "Chapitre non encore traité en classe"
2. **Ne pas imputer** : Ne pas calculer de score fictif
3. **Recommander** : Proposer un suivi spécifique post-formation quand le chapitre sera traité

### Validation des données
1. **Score bounds** : Vérifier que readinessScore ∈ [0, 100] et riskIndex ∈ [0, 100]
2. **Enum validation** : Vérifier que recommendation est une des 3 valeurs autorisées
3. **Date validation** : submittedAt doit être ≤ maintenant

### Confidentialité
1. **Champs sensibles** : invisibleDifficulties = "confidential" dans les métadonnées
2. **Accès restreint** : Seul le pôle pédagogie peut voir les freeText
3. **Anonymisation** : Pour les statistiques globales, utiliser des agrégats sans identifiant personnel
