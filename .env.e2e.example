# =============================================================================
# E2E ENVIRONMENT - Nexus RÃ©ussite Platform
# =============================================================================
# IMPORTANT: Copy to .env.e2e locally and fill with safe values
# Do NOT commit real secrets to version control
# =============================================================================

# =============================================================================
# APPLICATION (E2E Tests)
# =============================================================================
NODE_ENV=test
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=e2e_test_secret_min_32_characters_long_enough

# =============================================================================
# DATABASE (E2E - Isolated PostgreSQL)
# =============================================================================
# E2E uses dedicated PostgreSQL container on port 5435
DATABASE_URL=postgresql://postgres:postgres@localhost:5435/nexus_e2e?schema=public

# Docker Compose variables
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=nexus_e2e

# =============================================================================
# OPENAI (Mocked in E2E by default)
# =============================================================================
# Use mocked responses by default (no API calls)
DIRECT_OPENAI_DEV=0
OPENAI_API_KEY=sk-test-mock-key-not-used-in-e2e
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDINGS_MODEL=text-embedding-3-large
VECTOR_DIM=3072

# =============================================================================
# E2E OPTIMIZATIONS
# =============================================================================
# Reduced timeouts for faster test execution
OPENAI_TIMEOUT_MS=500
RETRIES=1

# =============================================================================
# E2E FLAGS
# =============================================================================
E2E=1
NEXT_PUBLIC_E2E=1
E2E_RUN=1

# Force lightweight implementations
PDF_RENDERER_FORCE=react    # Use React PDF (no Puppeteer)
STORAGE_PROVIDER=file       # Use file storage (no S3)
RAG_OCR_ENABLED=0           # Disable OCR (heavy)

# =============================================================================
# SMTP / EMAIL (Mocked in E2E)
# =============================================================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=test
SMTP_PASSWORD=test
SMTP_FROM=Test <test@test.com>
EMAIL_FROM=Test <test@test.com>

# =============================================================================
# RATE LIMITING (Disabled in E2E)
# =============================================================================
RATE_LIMIT_WINDOW_MS=999999
RATE_LIMIT_MAX=99999

