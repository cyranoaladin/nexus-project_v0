# =============================================================================
# NEXUS RÉUSSITE - Environment Configuration Template
# =============================================================================
# IMPORTANT: Copy this file to .env and fill in your actual values
# Never commit .env files with real secrets to version control
# =============================================================================

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================
# Local development (via Docker Compose)
DATABASE_URL=postgresql://postgres:postgres@localhost:5434/nexus_dev?schema=public

# Docker Compose variables
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=nexus_dev
DATABASE_PASSWORD=postgres

# Production: Use managed PostgreSQL service
# DATABASE_URL=postgresql://user:password@host:5432/dbname?schema=public

# =============================================================================
# NEXTAUTH (Authentication)
# =============================================================================
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-super-secret-key-minimum-32-characters-change-in-production

# Generate with: openssl rand -hex 32

# =============================================================================
# SMTP / EMAIL
# =============================================================================
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=no-reply@nexusreussite.academy
SMTP_PASS=your-hostinger-smtp-password
# Legacy alias (both are accepted):
SMTP_PASSWORD=your-hostinger-smtp-password
SMTP_FROM=Nexus Réussite <no-reply@nexusreussite.academy>
EMAIL_FROM=Nexus Réussite <no-reply@nexusreussite.academy>
MAIL_FROM=Nexus Réussite <no-reply@nexusreussite.academy>
MAIL_REPLY_TO=support@nexusreussite.academy
INTERNAL_NOTIFICATION_EMAIL=support@nexusreussite.academy
# Set to true to disable all email sending (defaults to true in NODE_ENV=test):
MAIL_DISABLED=false

# =============================================================================
# OPENAI (ARIA AI Assistant)
# =============================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDINGS_MODEL=text-embedding-3-large
VECTOR_DIM=3072

# =============================================================================
# HUGGING FACE (Alternative AI Models)
# =============================================================================
EMBEDDING_PROVIDER=openai
HUGGINGFACE_HUB_TOKEN=your-huggingface-token
HF_EMBEDDING_MODEL=intfloat/e5-large-v2

# =============================================================================
# LLM LOCAL (Ollama + Qwen) — Bilan generation
# =============================================================================
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=qwen2.5:32b
OLLAMA_TIMEOUT=180000

# =============================================================================
# LLM_MODE — Controls bilan generation behavior
# =============================================================================
# live  (default) : Real Ollama LLM generation (production)
# stub            : Deterministic short bilans, no network call (staging, fast tests)
# off             : Skip generation entirely, status=COMPLETED + errorCode=LLM_GENERATION_SKIPPED (CI, E2E)
#
# Recommended:
#   Production → live (or unset, defaults to live)
#   CI/E2E     → off
#   Staging    → stub or off
LLM_MODE=live

# =============================================================================
# RAG INGESTOR API — Pedagogical context retrieval (ChromaDB + nomic-embed-text)
# =============================================================================
RAG_INGESTOR_URL=http://ingestor:8001
RAG_SEARCH_TIMEOUT=10000

# =============================================================================
# MICROSERVICES (Legacy — Optional)
# =============================================================================
# LLM_SERVICE_URL=https://llm.nexus.internal:8003
PDF_GENERATOR_SERVICE_URL=https://pdf.nexus.internal:8002
# RAG_SERVICE_URL=https://rag.nexus.internal:8001

# =============================================================================
# PAYMENTS - KONNECT (Tunisia)
# =============================================================================
# KONNECT_API_KEY=your-konnect-api-key
# KONNECT_WALLET_ID=your-wallet-id
# KONNECT_BASE_URL=https://api.konnect.network
# KONNECT_WEBHOOK_SECRET=your-webhook-secret
# NEXT_PUBLIC_KONNECT_PUBLIC_KEY=pk_live_xxxxxxxxxxxxxxxxx

# =============================================================================
# PAYMENTS - WISE (Manual Display)
# =============================================================================
# WISE_API_KEY=your-wise-api-key
# WISE_PROFILE_ID=your-wise-profile-id

# =============================================================================
# JITSI (Video Conferencing)
# =============================================================================
NEXT_PUBLIC_JITSI_SERVER_URL=https://visio.nexusreussite.academy
# Or use public: https://meet.jit.si

# =============================================================================
# TELEGRAM (Stage Reservation Notifications)
# =============================================================================
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id
# Set to true to disable all Telegram sending (defaults to true in NODE_ENV=test):
TELEGRAM_DISABLED=false

# =============================================================================
# E2E TESTING (Disabled in production)
# =============================================================================
E2E=0
NEXT_PUBLIC_E2E=0
E2E_RUN=0

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=60

# =============================================================================
# LOGGING
# =============================================================================
# Log level: trace | debug | info | warn | error | fatal
LOG_LEVEL=info

# =============================================================================
# TELEMETRY
# =============================================================================
NEXT_TELEMETRY_DISABLED=1
